<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.songone.www.lizhi.json.dao.mybatis.RadioAudioDao">
	<resultMap type="RadioAudio" id="radioAudio">
		<result column="id" property="id" />
		<result column="name" property="name" />
		<result column="url" property="url" />
		<result column="cover" property="cover" />
		<result column="duration" property="duration" />
		<result column="createDate" property="createDate" />
		<result column="band" property="band" />
		<result column="radioName" property="radioName" />
		<result column="sync_flag" property="sync_flag" />
	</resultMap>
	<insert id="add" parameterType="RadioAudio" >
		insert into
		t_lizhi_json_audio
		(id, name, url, cover, duration, createDate, band, radioName,sync_flag)
		values
		(#{id},#{name}, #{url},#{cover},#{duration},#{createDate},#{band},#{radioName},#{sync_flag})
	</insert>
	<update id="updateSyncFlag" parameterType="RadioAudio">
		update t_lizhi_json_audio
		set audio.sync_flag = #{sync_flag}
		where audio.id = #{id}
	</update>
	<select id="queryModelById" parameterType="long" resultMap="radioAudio">
		select audio.id, audio.name, audio.url, audio.cover, audio.duration, audio.createDate, audio.band, audio.radioName,audio.sync_flag
		from  t_lizhi_json_audio audio
		where audio.id = #{id}
	</select>
	
	<select id="queryModelForSync" parameterType="PageResultModel" resultMap="radioAudio">
		select audio.id, audio.name, audio.url, audio.cover, audio.duration, audio.createDate, audio.band, audio.radioName,audio.sync_flag
		from  t_lizhi_json_audio audio
		where audio.sync_flag = 0
		limit #{start},#{pageSize}
	</select>
	<select id="queryModelByBandCounts" parameterType="int" resultType="int">
		select count(1) from t_lizhi_json_audio audio where audio.band = #{band}
	</select>
	
</mapper>